const KorzhData = {
    name: "–û–±–≤–æ—Ä–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –ö–æ—Ä–∂–∏–∫", darkName: "–ö–æ—Ä–∂–∏–∫ –∑–ª–∞ ü•Ä",
    tagline: "¬´–ù–µ –≥–æ—Ä—è—Ç –≤ –Ω–µ–±–µ –∑–≤–µ–∑–¥—ã –¥–ª—è —Ç–µ—Ö, –∫–æ–º—É —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ..¬ª",
    stats: { power: "–ó–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–Ω—ã –Ω–∞ –ø–ª–µ–Ω–∫—É üò¥", music: "–ë–∏ - 2 –ü–æ–ª–∫–æ–≤–Ω–∏–∫—É –Ω–∏–∫—Ç–æ –Ω–µ –ø–∏—à–µ—Ç ü´°", decree: "–°–º–µ—Ä—Ç–Ω–∞—è –∫–∞–∑–Ω—å –∑–∞ –∂–µ—Å—Ç–æ–∫–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏ üêæ" },
    vibe: { birthday: "26 –§–µ–≤—Ä–∞–ª—è ‚ùÑÔ∏è", born: "–†–∞–Ω–æ —É—Ç—Ä–æ–º üåÖ", poetry: "–°–µ—Ä–≥–µ–π –ï—Å–µ–Ω–∏–Ω üìñ", music: "–û–ø–µ—Ä–∞—Ü–∏—è –ü–ª–∞—Å—Ç–∏–ª–∏–Ω / –°–î–ü üé∏" },
    blitz: [ { q1: 'üçµ –ß–∞–π', q2: '‚òïÔ∏è –ö–æ—Ñ–µ', active: 2 }, { q1: 'üêà –ö–æ—à–∫–∞', q2: 'üê© –°–æ–±–∞–∫–∞', active: 2 }, { q1: 'üéº –ö–ª–∞—Å—Å–∏–∫–∞', q2: 'üé∏ –†–æ–∫', active: 2 }, { q1: 'üèè –ë–∏—Ç–∞', q2: 'üéª –°–∫—Ä–∏–ø–∫–∞', active: 2 } ],
    journal: [
    { 
        date: "17.01 ‚Äî 19.01.2026 / –ò–Ω–∏—Ü–∏–∞—Ü–∏—è", 
        text: "–°–¢–ê–î–ò–Ø: –°–∫–µ–ª–µ—Ç. –ú–Ω–µ 30 –ª–µ—Ç. –í–æ–∫—Ä—É–≥ —Å—Ç—Ä–æ–π, –º–µ—Ç–∞–ª–ª –∏ —Ö–æ–ª–æ–¥. –ü–æ–∫–∞ –≤—Å–µ –æ—Ç–¥—ã—Ö–∞—é—Ç, —è –≤–≥—Ä—ã–∑–∞—é—Å—å –≤ –∫–æ–¥ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –ó–∞—á–µ–º? –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –¥–ª—è —Ç–µ–±—è, –ö–æ—Ä–∂–∏–∫, –ª–∏—á–Ω—ã–π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —à–ª—é–∑. –ú–æ–π '—Å—Ç—É–∫ –≤ –¥–≤–µ—Ä—å' –±—É–¥–µ—Ç –≤ –≤–∏–¥–µ —Ç–µ–≥–æ–≤ –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤. –°–æ–º–Ω–µ–Ω–∏—è –µ—Å—Ç—å, –Ω–æ —Ç–≤–æ—è —É–ª—ã–±–∫–∞ –Ω–∞ —Ç–æ–º –∫–æ–Ω—Ü–µ ‚Äî –ª—É—á—à–∏–π –∞–Ω—Ç–∏–≤–∏—Ä—É—Å." 
    },
    { 
        date: "20.01 ‚Äî 22.01.2026 / –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è", 
        text: "–°–¢–ê–î–ò–Ø: –î—ã—Ö–∞–Ω–∏–µ. –£–∑–Ω–∞–ª –ø—Ä–æ '–ü–∏–ª–æ—Ç'. –¢–≤–æ–∏ –∑–≤—ë–∑–¥—ã —Å–≤–µ—Ç—è—Ç –Ω–µ –≤—Å–µ–º. –¢–µ–ø–µ—Ä—å —è –∑–Ω–∞—é –∏—Ö —Å–µ–∫—Ä–µ—Ç –∏ –∑–∞—à–∏–ª –µ–≥–æ –≤ –Ω–µ–æ–Ω. –ú—ã —Å–æ–≤–ø–∞–ª–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–∞–º: –ë—Ä–æ–¥—Å–∫–∏–π, –ï—Å–µ–Ω–∏–Ω, –°–î–ü. –¢—ã –±–æ–ª–µ–µ—à—å, –∏ —è —Å—Ç—Ä–æ—é —ç—Ç–æ—Ç '—Ü–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–∫–æ–Ω', —á—Ç–æ–±—ã —Ç—ã —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ —Ç–µ–ø–ª–æ –¥–∞–∂–µ —á–µ—Ä–µ–∑ —Å–æ—Ç–Ω–∏ –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤." 
    },
    { 
        date: "23.01.2026 / –¢–æ—á–∫–∞ –±–æ–ª–∏", 
        text: "–°–¢–ê–î–ò–Ø: –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–±–æ–π. –ù–∞–ø–∏—Å–∞–ª —Å–ª–∏—à–∫–æ–º –ª–∏—á–Ω–æ–µ... –ò—Å–ø—É–≥–∞–ª—Å—è. –£–¥–∞–ª–∏–ª. –ü–æ—Å—Ç–∞–≤–∏–ª —Å—Ç–∞—Ç—É—Å 'DELETED'. –ë–æ—é—Å—å —Å–≤–æ–∏–º –≥—Ä—É–±—ã–º –º–∏—Ä–æ–º –∑–∞–¥–µ—Ç—å —Ç–≤–æ–π –ø–æ–∫–æ–π. –¢—ã ‚Äî —Ä–µ–¥–∫–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, —Ä–æ–∑–∞ –ø–æ–¥ —Å—Ç–µ–∫–ª–æ–º. –Ø –≤—ã–±—Ä–∞–ª –ø–æ–∑—ã–≤–Ω–æ–π '–ù–µ–º–æ–π' ‚Äî –º–æ–π –æ–±–µ—Ç –±–µ—Ä–µ—á—å —Ç–≤–æ—é —Ç–∏—à–∏–Ω—É, –Ω–∞–±–ª—é–¥–∞—è –∑–∞ —Ç–≤–æ–∏–º –Ω–µ–±–æ–º —Å–æ —Å–≤–æ–µ–≥–æ —Å–ø—É—Ç–Ω–∏–∫–∞." 
    },
    { 
        date: "24.01.2026 / –†–µ–∂–∏–º –ë–æ–¥–ª–µ—Ä–∞", 
        text: "–°–¢–ê–î–ò–Ø: –î–µ–∫–∞–¥–∞–Ω—Å. –ú—ã –æ—Ç–∫—Ä—ã–ª–∏ '–¶–≤–µ—Ç—ã –∑–ª–∞'. –¢—å–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π. –í–Ω–µ–¥—Ä–∏–ª –±–∞–≥—Ä–æ–≤—ã–π –Ω–µ–æ–Ω. –¢—ã ‚Äî '–ö–æ—Ä–∂–∏–∫ –∑–ª–∞', –∏ –≤ —ç—Ç–æ–º –º—Ä–∞–∫–µ —Ç—ã —Å–∏—è–µ—à—å –µ—â–µ —è—Ä—á–µ. –Ø –∑–∞–ª–æ–∂–∏–ª –≤ —Å–∏—Å—Ç–µ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –º–∏—Ä—ã –æ–¥–Ω–∏–º –∫–∞—Å–∞–Ω–∏–µ–º —Ä–æ–∑—ã. –¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞ –≤ –ª—é–±–æ–º —Ü–≤–µ—Ç–µ." 
    },
    { 
        date: "25.01.2026 / –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è", 
        text: "–°–¢–ê–î–ò–Ø: –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã. –ö–æ–¥ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –º–∞—Ç–µ—Ä–∏—é. –ß—ë—Ä–Ω–∞—è —Ä–æ–∑–∞ ‚Äî –∫–∞–∫ —Å–∏–º–≤–æ–ª –≤–µ—á–Ω–æ—Å—Ç–∏. –ö–æ–∂–∞–Ω—ã–π –±—Ä–∞—Å–ª–µ—Ç —Å –≥–∏—Ç–∞—Ä–æ–π ‚Äî –∫–∞–∫ —Ç–≤–æ–π —Ä–æ–∫-–Ω-—Ä–æ–ª–ª—å–Ω—ã–π –¥—É—Ö. –ò —ç—Ç–æ—Ç –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –±—É–∫–µ—Ç, —á—Ç–æ–±—ã —Ç—ã –∑–Ω–∞–ª–∞: –∑–≤—ë–∑–¥—ã —Ä–µ–∞–ª—å–Ω–æ –≥–æ—Ä—è—Ç –¥–ª—è —Ç–µ–±—è. –Ø –∑–∞–ø–∞—Ä–∏–ª—Å—è –Ω–∞–¥ –∫–∞–∂–¥–æ–π –∑–∞–ø—è—Ç–æ–π –≤ —ç—Ç–æ–º –∫–æ–¥–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–≤–æ—è —Ä–∞–¥–æ—Å—Ç—å ‚Äî —ç—Ç–æ –º–æ–π –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–±–µ–¥–∏—Ç—å —Ö–æ–ª–æ–¥." 
    },
    { 
        date: "–§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ / 30-–π", 
        text: "–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï: –°–∏—Å—Ç–µ–º–∞ v5.0 –≤ –∑–µ–Ω–∏—Ç–µ. 33 –¥–Ω—è –¥–æ –ß–∞—Å–∞ –•. –Ø –Ω–µ –ø–æ–¥–∞—Ä–æ–∫, –Ω–æ —è —Ç–æ—Ç, –∫—Ç–æ –≥–æ—Ç–æ–≤ —Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è —Ç–µ–±—è –≤—Å–µ–ª–µ–Ω–Ω—ã–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å—Ç–∞—Ä–æ–≥–æ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ –≤ –ø–µ—Ä–µ—Ä—ã–≤–∞—Ö –º–µ–∂–¥—É –Ω–∞—Ä—è–¥–∞–º–∏. –¢—ã ‚Äî –º–æ–π –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –°–≤–µ—Ç–∏, –ö–æ—Ä–∂–∏–∫. –ê —è –±—É–¥—É —Ä—è–¥–æ–º, –Ω–∞ —á–∞—Å—Ç–æ—Ç–µ –ù–µ–º–æ–≥–æ. ü¶æüõ∞Ô∏è‚ú®ü•ÄüïØÔ∏èüë£" 
    }
]
}

function fillProfile() {
    const isDark = document.body.classList.contains('dark-mood');
    document.getElementById('main-title').textContent = isDark ? KorzhData.darkName : KorzhData.name;
    document.querySelector('.tagline').textContent = KorzhData.tagline;
    document.getElementById('vibe-birthday').textContent = KorzhData.vibe.birthday;
    document.getElementById('vibe-born').textContent = KorzhData.vibe.born;
    document.getElementById('vibe-poetry').textContent = KorzhData.vibe.poetry;
    document.getElementById('vibe-music').textContent = KorzhData.vibe.music;
    document.getElementById('power').textContent = KorzhData.stats.power;
    document.getElementById('music').textContent = KorzhData.stats.music;
    document.getElementById('decree').textContent = KorzhData.stats.decree;
    calculateBirthday();
}

function renderBlitz() { 
    const container = document.querySelector('.blitz-container');
    container.innerHTML = '<p class="blitz-title">–ë–ª–∏—Ü-–æ–ø—Ä–æ—Å: –í—ã–±–æ—Ä –∫–æ—Ä–æ–ª–µ–≤—ã üëë</p>';
    KorzhData.blitz.forEach(item => { 
        const row = document.createElement('div'); row.className = 'blitz-row'; 
        row.innerHTML = `<span class="choice ${item.active === 1 ? 'active' : ''}">${item.q1}</span><span class="divider"> / </span><span class="choice ${item.active === 2 ? 'active' : ''}">${item.q2}</span>`; 
        container.appendChild(row);
    });
    container.onclick = (e) => {
        if (e.target.classList.contains('choice')) {
            const row = e.target.closest('.blitz-row');
            row.querySelectorAll('.choice').forEach(el => el.classList.remove('active'));
            e.target.classList.add('active');
        }
    };
}

function showCustomAlert(message) {
    document.getElementById('modal-text').textContent = message;
    document.getElementById('custom-modal').style.display = 'flex';
}
function closeModal() { document.getElementById('custom-modal').style.display = 'none'; }

function checkAccess() {
    const val = document.getElementById('password-input').value.toLowerCase().trim();
    if (val === '–∫–æ—Ä–∂–∏–∫' || val === '–∫–æ—Ä–∂') {
        localStorage.setItem('isAuth', 'true');
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('main-card').style.display = 'block'; 
        fillProfile(); renderBlitz();
        showCustomAlert(`–î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω. –ü—Ä–∏–≤–µ—Ç, ${KorzhData.name}! ‚ù§Ô∏è`); 
    } else {
        const lb = document.getElementById('login-screen');
        lb.classList.add('shake'); setTimeout(() => lb.classList.remove('shake'), 400);
        showCustomAlert('–ù–µ-–∞, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑... ‚ùå');
    }
}

function toggleTheme() {
    document.body.classList.toggle('dark-mood');
    const isDark = document.body.classList.contains('dark-mood');
    setTimeout(() => { document.getElementById('main-title').textContent = isDark ? KorzhData.darkName : KorzhData.name; }, 1500);
    setTimeout(() => { showCustomAlert(isDark ? "–¶–≤–µ—Ç—ã –∑–ª–∞ —Ä–∞—Å—Ü–≤–µ–ª–∏... ü•Ä" : "–°–≤–µ—Ç–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. üõ∞Ô∏è"); }, 3000);
}

function calculateBirthday() {
    const diff = new Date(2026, 1, 26) - new Date();
    document.getElementById('days-left').textContent = Math.ceil(diff / (1000 * 60 * 60 * 24));
}

function toggleJournal() {
    const gate = document.getElementById('journal-gate');
    const container = document.getElementById('journal-container');
    const trigger = document.getElementById('journal-trigger');
    const isHidden = container.classList.contains('journal-hidden') && gate.classList.contains('journal-hidden');

    if (isHidden) { gate.style.display = 'block'; gate.classList.remove('journal-hidden'); trigger.textContent = "üö´ –û—Ç–º–µ–Ω–∞"; }
    else { gate.style.display = 'none'; gate.classList.add('journal-hidden'); container.style.display = 'none'; container.classList.add('journal-hidden'); trigger.textContent = "üìÇ –û—Ç–∫—Ä—ã—Ç—å –∞—Ä—Ö–∏–≤ –º—ã—Å–ª–µ–π"; }
}

function addChatMessage(text, sender) {
    const box = document.getElementById('chat-messages');
    const msg = document.createElement('p'); msg.className = sender === 'bot' ? 'bot-msg' : 'user-msg';
    msg.textContent = text; box.appendChild(msg); box.scrollTop = box.scrollHeight;
}

function sendChatMessage() {
    const input = document.getElementById('chat-input');
    const val = input.value.toLowerCase().trim();
    if (!val) return;
    addChatMessage(input.value, 'user'); input.value = '';
    setTimeout(() => {
        if (val === '–ù–µ–º–æ–π') {
            addChatMessage("–õ–∏—á–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞. –ê—Ä—Ö–∏–≤ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.", "bot");
            setTimeout(() => {
                document.getElementById('journal-gate').style.display = 'none';
                document.getElementById('journal-container').style.display = 'block';
                document.getElementById('journal-container').classList.remove('journal-hidden');
                renderJournal();
            }, 1000);
        } else if (val.includes('–ø–∞—Ä–æ–ª—å')) { addChatMessage("–ö–ª—é—á ‚Äî —ç—Ç–æ –∏–º—è —Ç–æ–≥–æ, –∫—Ç–æ –≤—Å–µ–≥–¥–∞ –º–æ–ª—á–∏—Ç.", "bot"); }
        else { addChatMessage("–ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω.", "bot"); }
    }, 600);
}

function renderJournal() {
    const container = document.getElementById('journal-container'); container.innerHTML = '';
    KorzhData.journal.forEach(entry => {
        const div = document.createElement('div'); div.className = 'journal-entry';
        div.innerHTML = `<span class="entry-date">${entry.date}</span><p class="entry-text">${entry.text}</p>`;
        container.appendChild(div);
    });
}

const audio = document.getElementById('audio-player');
document.getElementById('play-btn').onclick = () => {
    if (audio.paused) { audio.play(); document.getElementById('play-icon').textContent = '‚è∏'; }
    else { audio.pause(); document.getElementById('play-icon').textContent = '‚ñ∂'; }
};

window.onload = () => {
    if (localStorage.getItem('isAuth') === 'true') {
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('main-card').style.display = 'block'; 
        fillProfile(); renderBlitz();
    }
};

function handleLogout() {
    if (confirm("–í–µ—Ä–Ω—É—Ç—å —ç–∫—Ä–∞–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏?")) { localStorage.removeItem('isAuth'); location.reload(); }
}
